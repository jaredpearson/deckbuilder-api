CREATE TABLE Users (
	id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) PRIMARY KEY,
	facebookUsername VARCHAR(30) NULL UNIQUE,
	administrator SMALLINT DEFAULT 0
);
CREATE UNIQUE INDEX users_facebookusername_idx ON Users(facebookUsername);

CREATE TABLE Sets (
	id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) PRIMARY KEY,
	name VARCHAR(30) NOT NULL,
	abbreviation VARCHAR(5) NOT NULL,
	language CHAR(2) NOT NULL
);

CREATE TABLE Cards (
	id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) PRIMARY KEY,
	name VARCHAR(50),
	powerToughness VARCHAR(10),
	castingCost VARCHAR(20),
	text VARCHAR(500),
	typeLine VARCHAR(65),
	picUrl VARCHAR(100),
	cardSet INTEGER NOT NULL REFERENCES Sets(id),
	setIndex VARCHAR(4),
	rarity CHAR(1),
	artist VARCHAR(50)
);

CREATE TABLE Decks (
	id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) PRIMARY KEY,
	name VARCHAR(50),
	owner INTEGER NOT NULL REFERENCES Users(id)
);

CREATE TABLE DeckCards (
	id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) PRIMARY KEY,
	deck INTEGER NOT NULL REFERENCES Decks(id),
	card INTEGER NOT NULL REFERENCES Cards(id),
	quantity INTEGER NOT NULL
);